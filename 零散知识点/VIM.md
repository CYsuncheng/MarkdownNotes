# VIM

## 查找替换

| 快捷键 | 操作 |
| --- | --- |
| /pattern | 向后搜索字符串pattern |
| ?pattern | 向前搜索字符串pattern |
| n | 下一个匹配(如果是/搜索，则是向下的下一个，?搜索则是向上的下一个) |
| N | 上一个匹配(同上) |
| :%s/old/new/g | 搜索整个文件，将所有的old替换为new |
| :%s/old/new/gc | 搜索整个文件，将所有的old替换为new，每次都要你确认是否替换 |

查找很长的词，如果一个词很长，键入麻烦，可以将光标移动到该词上，按*或#键即可以该单词进行搜索，相当于/搜索。而#命令相当于?搜索。

## 复制粘贴

| 快捷键 | 操作 |
| --- | --- |
| dd | 删除光标所在行 |
| dw | 删除一个字(word) |
| x | 删除当前字符 |
| X | 删除前一个字符 |
| D | 删除到行末 |
| yy | 复制一行，此命令前可跟数字，标识复制多行，如6yy，表示从当前行开始复制6行 |
| yw | 复制一个字 |
| y$ | 复制到行末 |
| p | 粘贴粘贴板的内容到当前行的下面 |
| P | 粘贴粘贴板的内容到当前行的上面 |
| ]p | 有缩进的粘贴，vim会自动调节代码的缩进 |
| "a | 将内容放入/存入a寄存器，可以支持多粘贴板 |

附：比如常用的一个寄存器就是系统寄存器，名称为+，所以从系统粘贴板粘贴到vim中的命令为"+p,注意此处的+不表示操作符，二十一个寄存器。


## 移动光标
在vim中移动光标跟其他的编辑器中有很大的区别，不过一旦学会了，就会飞速的在文本中移动了。

| 快捷键 | 操作 |
| --- | --- |
| h,j,k,l | 上，下，左，右 |
| ctrl-f | 上翻一页 |
| ctrl-b | 下翻一页 |
| % | 跳到与当前括号匹配的括号处，如当前在{，则跳转到与之匹配的}处 |
| w | 跳到下一个字首，按标点或单词分割 |
| W | 跳到下一个字首，长跳，如end-of-line被认为是一个字 |
| e | 跳到下一个字尾 |
| E | 跳到下一个字尾，长跳 |
| b | 跳到上一个字 |
| B | 跳到上一个字，长跳 |
| 0 | 跳至行首，不管有无缩进，就是跳到第0个字符 |
| ^ | 跳至行首的第一个字符 |
| $ | 跳至行尾 |
| gg | 跳至文件的第一行 |
| gd | 跳至当前光标所在的变量的声明处 |
| [N]G | 跳到第N行，如0G，就等价于gg，100G就是第100行 |
| fx | 在当前行中找x字符，找到了就跳转至 |
| ; | 重复上一个f命令，而不用重复的输入fx |
| tx | 与fx类似，但是只是跳转到x的前一个字符处 |
| Fx | 跟fx的方向相反 |
| ),( | 跳转到上/下一个语句 |
| * | 查找光标所在处的单词，向下查找 |
| # | 查找光标所在处的单词，向上查找 |
| `. | 跳转至上次编辑位置 |

### 在屏幕上移动
| 快捷键 | 操作 |
| --- | --- |
| H | 移动光标到当前屏幕上最上边的一行 |
| M | 移动光标到当前屏幕上中间的一行 |
| L | 移动光标到当前屏幕上最下边的一行 |
|Ctrl+] | 跳转到当前标识符的定义位置 （相当于在当前光标位置的单词上按住ctrl用鼠标点击）| 
|Ctrl+o | 回退一步 (go back) |
|Ctrl+i | 前进一步 (go forward) |
|`. | 跳转到之前修改位置 |
|`` |在前一次跳转位置与当前位置间切换 |
| 行号G 或 :行号<回车> | 跳转到某一行 
|gg | 跳转到文件开头 |
|G | 跳转到文件末尾 |
|f 或 F | 跳转到本行某个字符，小写f向右查找，大写F向左查找。用;或,在匹配间切换 |
| t 或 T | 跳转到本行某个字符之前，小写t向右查找，大写T向左查找。用;或,在匹配间切换 
|/正则表达式 | 跳转到下一个匹配。用n或N在匹配间切换。| 
|?正则表达式 | 跳转到上一个匹配。用n或N在匹配间切换。 |



## 编辑

| 快捷键 | 操作 |
| --- | --- |
| r | 替换一个字符 |
| J | 将下一行和当前行连接为一行 |
| cc | 删除当前行并进入编辑模式 |
| cw | 删除当前字，并进入编辑模式 |
| c$ | 擦除从当前位置至行末的内容，并进入编辑模式 |
| s | 删除当前字符并进入编辑模式 |
| S | 删除光标所在行并进入编辑模式 |
| xp | 交换当前字符和下一个字符 |
| u | 撤销 |
| ctrl+r | 重做 |
| . | 重复上一个编辑命令 |
| ~ | 切换大小写，当前字符 |
| g~iw | 切换当前字的大小写 |
| gUiw | 将当前字变成大写 |
| guiw | 将当前字变成小写 |
| >> | 将当前行右移一个单位 |
| << | 将当前行左移一个单位(一个tab符) |
| == | 自动缩进当前行 |
|x | 删除当前字符|
|3x | 删除当前光标开始向后三个字符|
|X | 删除当前字符的前一个字符。X=dh|
|dl | 删除当前字符， dl=x|
|dh | 删除前一个字符|
|dd | 删除当前行|
|dj | 删除上一行|
|dk | 删除下一行|
|10d | 删除当前行开始的10行|
|D | 删除当前字符至行尾。D=d$|
|d$ | 删除当前字符之后的所有字符（本行）|
|kdgg | 删除当前行之前所有行（不包括当前行）|
|dt" | 删除所有的内容，直到遇到双引号|

c<范围> - 删除光标所在位置周围某个范围的文本并进入插入模式。关于范围请看第5点，常用的组合有：caw - 删除一个单词包括它后面的空格并开始插入； ciw - 删除一个单词并开始插入； ci" - 删除一个字符串内部文本并开始插入； c$ - 从光标位置删除到行尾并开始插入； ct字符 - 从光标位置删除本行某个字符之前（保留该字符）并开始插入。


## 插入模式

| 快捷键 | 操作 |
| --- | --- |
| i | 从当前光标处进入插入模式 |
| I | 进入插入模式，并置光标于行首 |
| a | 追加模式，置光标于当前光标之后 |
| A | 追加模式，置光标于行末 |
| o | 在当前行之下新加一行，并进入插入模式 |
| O | 在当前行之上新加一行，并进入插入模式 |
| Esc | 退出插入模式 |


## 可视模式

### 标记文本

| 快捷键 | 操作 |
| --- | --- |
| v | 进入可视模式，单字符模式 |
| V | 进入可视模式，行模式 |
| ctrl+v | 进入可视模式，列模式，类似于UE的列模式 |
| o | 跳转光标到选中块的另一个端点 |
| U | 将选中块中的内容转成大写 |
| O | 跳转光标到块的另一个端点 |
| aw | 选中一个字 |
| ab | 选中括号中的所有内容，包括括号本身 |
| aB | 选中{}括号中的所有内容 |
| ib | 选中括号中的内容，不含括号 |
| iB | 选中{}中的内容，不含{} |
|aw  | 一个单词加一个空格 （a可理解为“一个”，下同）|
|iw | 一个单词 （i可理解为in，下同）|
|a" | 一个字符串包括双引号 |
|i" | 一个字符串内部文本 |
|a< | 一组< >包含的文本，包括< >号本身 |
|同理类推：| i<, a[, i[, a(, i( |


### 对标记进行动作

| 快捷键 | 操作 |
| --- | --- |
| > | 块右移 |
| < | 块左移 |
| y | 复制块 |
| d | 删除块 |
| ~ | 切换块中内容的大小写 |


### 一些插入模式下的常用快捷键 

| 快捷键 | 操作 |
| --- | --- |
|Ctrl+h | 删除光标左边字符 |
|Ctrl+w | 删除光标左边的单词 |
|Ctrl+y | 复制上方的一个字符 |
|Ctrl+e | 复制下方的一个字符 |
|Ctrl+r 0 | 插入前一次用y命令寄存的内容 |
|Ctrl+r * | 插入系统剪贴板的内容 |
|Ctrl+r <寄存器名称> | 插入指定寄存器的内容 |
|Ctrl+a | 插入前一次插入模式所键入的内容 |
|Ctrl+o | 执行一个普通模式下的命令然后返回插入模式。 例如 Ctrl+o A 相当于按 End键， Ctrl+o I相当于按Home键 |

### 范围操作 

某些普通模式的动作命令后面可以追加一些表示范围的指令，表示该动作将作用在整个范围上。这类命令常用的有： 

| 快捷键 | 操作 |
| --- | --- |
|d<范围> | 删除一定范围内的文本 |
|c<范围> | 删除一定范围内的文本并进入插入模式 |
|y<范围> | 将范围内的文本放入0号和"号注册栏 |
|v<范围> | 选择范围内的文本 |
|=<范围> | 自动缩进范围内的文本 |
|gU<范围> | 将范围内的字符转换为大写 |
|gu<范围> | 将范围内的字符转换为小写 |
|><范围> | 将范围中的内容缩进一格 |
|<<范围> | 将范围中的内容取消缩进一格 |


组合命令

| 快捷键 | 操作 |
| --- | --- |
|. | 点命令重复上一个命令 |
|n<commmand> | 将命令重复 n 次|
|di" | 光标在引号内， (d)elete (i)nside "  删除在引号之间的内容|
|yi( | 光标在括号内， (y)ank (i)nside ()  复制在 () 中的内容|
|vi] | 光标在中括号内， 选中 [] 内的内容|

以下是命令 c 加上一些操作，其他 d(elete) y(ank) v(iual) 都可以接

| 快捷键 | 操作 |
| --- | --- |
|ci" | 改写双引号中的内容|
|ci' | 改写单引号中的内容|
|cib | 改写小括号中的内容|
|cab | 改写小括号中的内容（包含小括号本身）|
|ci) | 改写小括号中的内容|
|ci] | 改写中括号中内容|
|ciB | 改写大括号中内容|
|caB | 改写大括号中的内容（包含大括号本身）|
|ci} | 改写大括号中内容|
|cit | 改写 xml tag 中的内容|
|cis | 改写当前句子|
|c2w | 改写下两个单词|
|ct( | 改写到小括号前|


简单的大小写替换可以使用：

| 快捷键 | 操作 |
| --- | --- |
|~ | 替换大小写|
|g~iw | 替换当前单词大小写|
|gUiw | 将单词转为大写|
|guiw | 将单词转为小写|
|gUU | 全行转为大写|
|guu | 全行转为小写|

最强的光标移动

| 快捷键 | 操作 |
| --- | --- |
| % | 匹配括号移动，包括 (, {, [. （你需要把光标先移到括号上）|
|* 和 # | 匹配光标当前所在的单词，移动光标到下一个（或上一个）匹配单词（*是下一个，#是上一个）|